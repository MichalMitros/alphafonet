<html>
<head>
    <meta charset="utf-8">
    <title>AlphaFonet</title>
    <style>
        html, body { height: 100%; }
        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding-top: 10vh;
            background-color: #000;
        }
        .container {
            display: flex;
            gap: 20px;
            margin-top: 2rem;
            border: 0.1rem solid #fff;
            border-radius: 1rem;
            padding: 1rem;
            width: auto;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            background-color: #111;
        }
        button {
            padding: 0.5rem 1rem;
            font-size: 2.5rem;
            border: none;
            border-radius: 1rem;
            cursor: pointer;
            background-color: #ddd;
            font-family: Arial, Helvetica, sans-serif;
        }
        .back-btn {
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1000;
            background: rgba(20,20,20,0.8);
            color: #fff;
            border: 0.1rem solid rgba(255,255,255,0.12);
            padding: 1rem 2rem;
            border-radius: 0.6rem;
            font-size: 2rem;
            cursor: pointer;
            backdrop-filter: blur(4px);
        }
        .back-btn:focus {
            outline: 2px solid #fff;
            outline-offset: 2px;
        }
        .letter-display {
            color: #fff;
            font-size: 10rem;
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>
    <script>
        const letters = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];
        const fonetics = ['Alpha','Bravo','Charlie','Delta','Echo','Foxtrot','Golf','Hotel','India','Juliett','Kilo','Lima','Mike','November','Oscar','Papa','Quebec','Romeo','Sierra','Tango','Uniform','Victor','Whiskey','Xray','Yankee','Zulu'];

        // store current letter/fonetic for checking
        let current = { letter: '', fonetic: '' };

        function getRandomLetter() {
            const index = Math.floor(Math.random() * letters.length);
            return { letter: letters[index], fonetic: fonetics[index], index };
        }

        function normalizeLettersOnly(s){
            return (s||'').toUpperCase().replace(/[^A-Z]/g,'');
        }

        // Some accepted aliases (normalized form -> array of normalized aliases)
        const aliases = {
            'ALPHA': ['ALFA'],
            'XRAY': ['XRAY'],
            'JULIETT': ['JULIET']
        };

        // Returns true if inputText is an accepted phonetic notation for `letter`
        function isCorrectPhonetic(inputText, letter){
            if(!inputText || !letter) return false;
            const expected = current.fonetic || '';
            const normInput = normalizeLettersOnly(inputText);
            const normExpected = normalizeLettersOnly(expected);
            if(normInput === normExpected) return true;
            const ali = aliases[normExpected];
            if(ali && ali.some(a => a === normInput)) return true;
            return false;
        }

        window.onload = () => {
            const display = document.querySelector('.letter-display');
            const input = document.getElementById('phonetic-input');
            const checkBtn = document.getElementById('check-btn');
            const nextBtn = document.getElementById('next-btn');
            const feedback = document.getElementById('feedback');
            var checked = false;

            function showNew() {
                const { letter, fonetic } = getRandomLetter();
                current = { letter, fonetic };
                display.textContent = letter;
                if(input) input.value = '';
                if(feedback) {
                    feedback.textContent = '';
                }
                if(nextBtn){
                    nextBtn.setAttribute('disabled', 'true');
                }
            }

            function showResult(ok) {
                if(feedback){
                    feedback.textContent = ok ? 'Correct ✓' : 'Incorrect ✕';
                    feedback.style.color = ok ? '#4ade80' : '#f87171';
                }
            }

            if(checkBtn){
                checkBtn.addEventListener('click', ()=>{
                    const ok = isCorrectPhonetic(input.value, current.letter);
                    showResult(ok);
                    if(nextBtn && ok){
                        nextBtn.removeAttribute('disabled');
                        checked = true;
                    }
                });
            }

            if(input){
                input.addEventListener('keydown', (e)=>{
                    if(e.key === 'Enter'){
                        e.preventDefault();
                        if(nextBtn && checked){
                            nextBtn.click();
                            checked = false;
                        } else if(checkBtn) checkBtn.click();
                    }
                });
            }

            if(nextBtn){
                nextBtn.addEventListener('click', showNew);
            }

            // initial
            showNew();
        };

    </script>
</head>
<body>
    <button class="back-btn" aria-label="Go back" onclick="window.location.href='index.html'">←</button>
    <div class="container">
        <p class="letter-display" id="letter-display"></p>
        <div style="display:flex; gap:0.5rem; align-items:center; margin-top:0.5rem;">
            <input id="phonetic-input" type="text" placeholder="e.g. Alpha" style="font-size:1.9rem; padding:0.5rem; border-radius:0.5rem; border:0.1rem solid #ccc;" />
            <button id="check-btn">Check</button>
            <button id="next-btn">Next</button>
        </div>
        <div id="feedback" role="status" style="margin-top:0.6rem; min-height:1.2rem; color:#fff"></div>
    </div>
</body>
</html> 